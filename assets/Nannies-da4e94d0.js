import{r as c,u as w,j as e,I as k,c as E,f as S,a as q,b as d,d as F,o as C,M as A,e as m,g as N,s as $,h as L,i as M}from"./index-71a9c4d4.js";const O="_page_xf38e_1",R={page:O},g={},y=()=>{const s=["A to Z","Z to A","Less than 10$","Greater than 10$","Popular","Not popular","Show all"],[i,n]=c.useState(!1),[t,r]=c.useState("A to Z"),o=c.useRef(null),l=w(),h=a=>l(S(a)),p=()=>{n(!i)},x=a=>{r(a),n(!1),h(a)},u=a=>{o.current&&!o.current.contains(a.target)&&p()};return c.useEffect(()=>(document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)})),e.jsxs("div",{children:[e.jsx("p",{children:"Filters"}),e.jsxs("button",{className:g.dropdown,onClick:p,children:[t,e.jsx(k,{id:"arrow-down",className:g.icon})]}),i&&e.jsx("ul",{ref:o,children:s.map((a,j)=>e.jsx("li",{className:E(g.option,`${t===a?g.active:""}`),onClick:()=>x(a),children:a},j))})]})},I=s=>s.nannies.items,Z=s=>s.nannies.lastKey,D=s=>s.nannies.message,P=s=>s.filter.filter,v={},K=/^\+[0-9]{1,3}[0-9]{3}[0-9]{3}[0-9]{4}$/,G=/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/,W=q({address:d().required("Address is required"),email:d().email("Please enter a valid email").required("Email is required"),phone:d().matches(K,"Not valid phone number").required("Phone number is required"),age:d().required("Age is required"),time:d().matches(G,"Not valid time format").required("Time is required"),name:d().required("Name is required"),comment:d()}).required(),B=({name:s,avatar:i})=>{var p,x,u,a,j,f,b;const{register:n,handleSubmit:t,formState:{errors:r}}=F({resolver:C(W)}),[o,l]=c.useState(null),h=_=>l(_);return console.log(o),e.jsxs("div",{children:[e.jsx("h2",{children:"Make an appointment with a babysitter"}),e.jsx("p",{children:"Arranging a meeting with a caregiver for your child is the first step to creating a safe and comfortable environment. Fill out the form below so we can match you with the perfect care partner."}),e.jsxs("div",{children:[e.jsx("img",{src:i,alt:s}),e.jsxs("div",{children:[e.jsx("p",{children:"Your nanny"}),e.jsx("h3",{children:s})]}),e.jsx("form",{onSubmit:t(h),children:e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("input",{...n("address"),placeholder:"Address"}),e.jsx("p",{children:(p=r.address)==null?void 0:p.message})]}),e.jsxs("div",{children:[e.jsx("input",{...n("age"),placeholder:"Child's age"}),e.jsx("p",{children:(x=r.age)==null?void 0:x.message})]})]}),e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("input",{...n("phone"),placeholder:"00:00"}),e.jsx("p",{children:(u=r.phone)==null?void 0:u.message})]}),e.jsxs("div",{children:[e.jsx("input",{...n("email"),placeholder:"Email"}),e.jsx("p",{children:(a=r.email)==null?void 0:a.message})]})]}),e.jsxs("div",{children:[e.jsx("input",{...n("email"),placeholder:"Email"}),e.jsx("p",{children:(j=r.email)==null?void 0:j.message})]}),e.jsxs("div",{children:[e.jsx("input",{...n("name"),placeholder:"Father's or mother's name"}),e.jsx("p",{children:(f=r.name)==null?void 0:f.message})]}),e.jsxs("div",{children:[e.jsx("textarea",{...n("comment"),placeholder:"Comment",rows:4}),e.jsx("p",{children:(b=r.comment)==null?void 0:b.message})]}),e.jsx("button",{type:"submit",children:"Send"})]})})]})]})},T=({reviews:s,avatar:i,name:n})=>{const[t,r]=c.useState(!1);return e.jsxs("div",{children:[e.jsx("ul",{children:s.map(o=>{})}),e.jsx("button",{type:"button",onClick:()=>r(!0),children:"Make an appointment"}),t&&e.jsx(A,{isOpen:t,onClose:()=>r(!1),children:e.jsx(B,{name:n,avatar:i})})]})},Y=({nanny:s})=>{const[i,n]=c.useState(!1);return e.jsxs("div",{children:[e.jsxs("div",{className:v.imageWrapper,children:[e.jsx("img",{src:"",alt:""}),e.jsx("div",{})]}),e.jsxs("div",{className:v.infoWrapper,children:[e.jsx("div",{className:v.header}),e.jsx("ul",{}),e.jsx("p",{className:v.description,children:s.about})]}),i?e.jsx(T,{reviews:s.reviews,avatar:s.avatar_url,name:s.name}):e.jsx("button",{type:"button",onClick:()=>n(!0),children:"Read more"})]})},z=(s,i)=>{let n=[...s];switch(i){case"A to Z":n.sort((t,r)=>t.name.localeCompare(r.name));break;case"Z to A":n.sort((t,r)=>r.name.localeCompare(t.name));break;case"Less than 10$":n=s.filter(t=>t.price_per_hour<10).sort((t,r)=>r.price_per_hour-t.price_per_hour);break;case"Greater than 10$":n=s.filter(t=>t.price_per_hour>10).sort((t,r)=>t.price_per_hour-r.price_per_hour);break;case"Popular":n.sort((t,r)=>r.rating-t.rating);break;case"Not popular":n.sort((t,r)=>t.rating-r.rating);break}return n},H=()=>{const s=w(),i=m(I),n=m(P),t=m(Z),r=m(D);c.useEffect(()=>{s(N({limit:3}))},[s]),console.log(i);const o=()=>{s(N({limit:3,lastKey:t}))},l=z(i,n);return e.jsx(e.Fragment,{children:l.length>0?e.jsxs("div",{children:[e.jsx("ul",{children:l.map(h=>e.jsx("li",{children:e.jsx(Y,{nanny:h})},h.id))}),r||l===0?e.jsx("p",{children:r}):e.jsx("button",{type:"button",onClick:o,children:"Load more"})]}):e.jsx("p",{children:"No nannies to show"})})},J=()=>e.jsx("div",{children:"Error"}),U=()=>{const s=m($),i=m(L);return e.jsxs("div",{className:R.container,children:[s&&e.jsx(M,{}),i&&e.jsx(J,{}),e.jsxs("div",{children:[e.jsx(y,{}),e.jsx(H,{})]})]})};export{U as default};
